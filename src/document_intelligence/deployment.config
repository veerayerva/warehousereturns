# Azure Deployment Configuration for Document Intelligence Function App

# Application Settings for Production Deployment
# Copy these settings to your Azure Function App configuration

## Core Function App Settings
FUNCTIONS_WORKER_RUNTIME=python
FUNCTIONS_WORKER_RUNTIME_VERSION=3.11
FUNCTIONS_EXTENSION_VERSION=~4
WEBSITE_RUN_FROM_PACKAGE=1

## Azure Document Intelligence Configuration
# Replace with your actual Document Intelligence resource values
DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-doc-intel-resource.cognitiveservices.azure.com/
DOCUMENT_INTELLIGENCE_API_KEY=@Microsoft.KeyVault(VaultName=your-keyvault;SecretName=doc-intel-api-key)
DOCUMENT_INTELLIGENCE_API_VERSION=2023-07-31
DEFAULT_MODEL_ID=serialnumber

## Azure Blob Storage Configuration  
# Replace with your actual storage account values
AZURE_STORAGE_CONNECTION_STRING=@Microsoft.KeyVault(VaultName=your-keyvault;SecretName=storage-connection-string)
BLOB_CONTAINER_PREFIX=warehouse-returns-doc-intel
ENABLE_BLOB_STORAGE=true

## Document Processing Configuration
CONFIDENCE_THRESHOLD=0.7
MAX_FILE_SIZE_MB=50
SUPPORTED_CONTENT_TYPES=application/pdf,image/jpeg,image/jpg,image/png,image/bmp,image/tiff

## Application Insights Configuration
# Replace with your actual Application Insights connection string
APPLICATIONINSIGHTS_CONNECTION_STRING=@Microsoft.KeyVault(VaultName=your-keyvault;SecretName=appinsights-connection-string)
APPINSIGHTS_INSTRUMENTATIONKEY=@Microsoft.KeyVault(VaultName=your-keyvault;SecretName=appinsights-key)
LOG_LEVEL=INFO
ENABLE_STRUCTURED_LOGGING=true

## Azure API Configuration
AZURE_API_RETRY_ATTEMPTS=3
AZURE_API_RETRY_DELAY=2
AZURE_API_TIMEOUT=300

## Environment Configuration
AZURE_FUNCTIONS_ENVIRONMENT=Production
WEBSITE_TIME_ZONE=UTC

## Security Configuration
CORS_ALLOWED_ORIGINS=https://your-frontend-domain.com
WEBSITE_HTTPLOGGING_RETENTION_DAYS=7

# Key Vault Configuration (Optional)
# If using Azure Key Vault for secrets management
# KEYVAULT_NAME=your-keyvault-name

# Deployment Script Commands
# Use these commands for Azure CLI deployment

# 1. Create Resource Group
# az group create --name rg-warehouse-returns-doc-intel --location eastus

# 2. Create Storage Account  
# az storage account create --name storagewarehousereturns --resource-group rg-warehouse-returns-doc-intel --location eastus --sku Standard_LRS

# 3. Create Application Insights
# az monitor app-insights component create --app warehouse-returns-doc-intel --location eastus --resource-group rg-warehouse-returns-doc-intel

# 4. Create Document Intelligence Resource
# az cognitiveservices account create --name doc-intel-warehouse-returns --resource-group rg-warehouse-returns-doc-intel --kind FormRecognizer --sku S0 --location eastus

# 5. Create Function App
# az functionapp create --resource-group rg-warehouse-returns-doc-intel --consumption-plan-location eastus --runtime python --runtime-version 3.11 --functions-version 4 --name warehouse-returns-doc-intel --storage-account storagewarehousereturns --app-insights warehouse-returns-doc-intel

# 6. Configure Application Settings
# az functionapp config appsettings set --name warehouse-returns-doc-intel --resource-group rg-warehouse-returns-doc-intel --settings @deployment-settings.json

# 7. Deploy Function App
# func azure functionapp publish warehouse-returns-doc-intel --python

# Infrastructure as Code (Bicep/ARM Template)
# Consider using infrastructure as code for consistent deployments
# See infrastructure/ directory for Bicep templates